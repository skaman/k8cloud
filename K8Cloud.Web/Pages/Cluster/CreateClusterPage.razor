@using K8Cloud.Web.Components.Clusters

@page "/clusters/create"
@inject ISnackbar Snackbar

<NavigationLock OnBeforeInternalNavigation="OnBeforeInternalNavigation" />

<K8PageHeader Title="@($"Add cluster")"
            Description="Add a configuration for a kubernetes cluster."
            BreadcrumbItems="BreadcrumbItems">
    <PageHeaderActions>
        <K8CancelButton Disabled="@IsCancelDisabled" Href="@($"/clusters")">Cancel</K8CancelButton>
        <K8SaveButton Disabled="@IsSaveDisabled" OnClick="Save">Save</K8SaveButton>
    </PageHeaderActions>
</K8PageHeader>

<K8Card>
    <MudCardContent>
        <EditForm EditContext="@EditContext">
            <DataAnnotationsValidator />
            <ClusterForm Data="@Data" />
        </EditForm>
    </MudCardContent>
    <MudCardActions>
        <MudFileUpload T="IBrowserFile" FilesChanged="LoadConfigurationFile">
            <ButtonTemplate>
                <MudButton HtmlTag="label"
                           Variant="Variant.Text"
                           StartIcon="@Icons.Material.TwoTone.FileOpen"
                           Color="Color.Default"
                           for="@context">
                    Load from configuration file
                </MudButton>
            </ButtonTemplate>
        </MudFileUpload>
    </MudCardActions>
</K8Card>

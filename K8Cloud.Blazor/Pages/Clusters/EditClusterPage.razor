@using K8Cloud.Blazor.Components.Clusters;

@page "/clusters/{id:guid}/edit"
@inject ISnackbar Snackbar

<NavigationLock OnBeforeInternalNavigation="OnBeforeInternalNavigation" />

<PageHeader Title="@($"Edit {ClusterName}")"
            Description="Edit the configuration for your your kubernetes clusters."
            BreadcrumbItems="BreadcrumbItems">
    <PageHeaderActions>
        <CancelButton Disabled="@IsLoading" Href="@($"/clusters/{@Id}")" />
        <SaveButton Disabled="@IsLoading" OnClick="Save" />
    </PageHeaderActions>
</PageHeader>

<MudCard>
    <MudCardContent>
        <ClusterForm @bind-IsTouched="IsFormTouched" Data="@Data" IsReadOnly="@IsLoading" />
    </MudCardContent>
    <MudCardActions>
        <MudFileUpload T="IBrowserFile" FilesChanged="LoadConfigurationFile">
            <ButtonTemplate>
                <MudButton HtmlTag="label"
                           Variant="Variant.Text"
                           StartIcon="@Icons.Material.TwoTone.FileOpen"
                           Color="Color.Default"
                           for="@context">
                    Load from configuration file
                </MudButton>
            </ButtonTemplate>
        </MudFileUpload>
    </MudCardActions>
</MudCard>

@using K8Cloud.Blazor.Components.Clusters;

@page "/clusters/add"
@inject ISnackbar Snackbar

<NavigationLock OnBeforeInternalNavigation="OnBeforeInternalNavigation" />

<PageHeader Title="@($"Add cluster")"
            Description="Add a configuration for a kubernetes cluster."
            BreadcrumbItems="BreadcrumbItems">
    <PageHeaderActions>
        <CancelButton Disabled="@IsLoading" Href="@($"/clusters")" />
        <SaveButton Disabled="@IsLoading" OnClick="Save" />
    </PageHeaderActions>
</PageHeader>

<MudCard>
    <MudCardContent>
        <ValidatedForm @ref="@Form"
                 Model="@Data"
                 Validation="@(Validator.ValidateValue)"
                 ReadOnly="@IsLoading">
            <ClusterForm Data="@Data" />
        </ValidatedForm>
    </MudCardContent>
    <MudCardActions>
        <MudFileUpload T="IBrowserFile" FilesChanged="LoadConfigurationFile">
            <ButtonTemplate>
                <MudButton HtmlTag="label"
                           Variant="Variant.Text"
                           StartIcon="@Icons.Material.TwoTone.FileOpen"
                           Color="Color.Default"
                           for="@context">
                    Load from configuration file
                </MudButton>
            </ButtonTemplate>
        </MudFileUpload>
    </MudCardActions>
</MudCard>

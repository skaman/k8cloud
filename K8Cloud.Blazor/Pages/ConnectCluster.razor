@page "/connect-cluster"
@inject ISnackbar Snackbar

<PageTitle>Connect a cluster</PageTitle>

<MudCard Outlined="true">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.h6">Connect a new cluster</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudForm Model="@Data" @ref="@Form" Validation="@(Validator.ValidateValue)" ValidationDelay="0">
        <MudCardContent>
            <MudStack>
                <MudTextField @bind-Value="Data.ServerName"
                              For="@(() => Data.ServerName)"
                              Immediate="true"
                              Label="Server name" />

                <MudTextField @bind-Value="Data.ServerAddress"
                              For="@(() => Data.ServerAddress)"
                              Immediate="true"
                              Label="Server address" />

                <MudTextField @bind-Value="Data.ServerCertificateAuthorityData"
                              For="@(() => Data.ServerCertificateAuthorityData)"
                              Immediate="true"
                              Lines="8"
                              Label="Server certificate authority data" />

                <MudTextField @bind-Value="Data.UserName"
                              For="@(() => Data.UserName)"
                              Immediate="true"
                              Label="User name" />

                <MudTextField @bind-Value="Data.UserCredentialsCertificateData"
                              For="@(() => Data.UserCredentialsCertificateData)"
                              Immediate="true"
                              Lines="8"
                              Label="User credentials certificate data" />

                <MudTextField @bind-Value="Data.UserCredentialsKeyData"
                              For="@(() => Data.UserCredentialsKeyData)"
                              Immediate="true"
                              Lines="4"
                              Label="User credentials key data" />

                <MudTextField @bind-Value="Data.Namespace"
                              For="@(() => Data.Namespace)"
                              Immediate="true"
                              Label="Namespace" />
            </MudStack>
        </MudCardContent>
    </MudForm>
    <MudCardActions>
        <MudFileUpload T="IBrowserFile" FilesChanged="LoadConfigurationFile">
            <ButtonTemplate>
                <MudButton HtmlTag="label"
                           Variant="Variant.Text"
                           Color="Color.Secondary"
                           for="@context">
                    Load from configuration file
                </MudButton>
            </ButtonTemplate>
        </MudFileUpload>
        <MudButton Variant="Variant.Text"
                   Color="Color.Primary"
                   Class="ml-auto"
                   OnClick="Submit">
            Connect
        </MudButton>
    </MudCardActions>
</MudCard>
